<div>

    <waltz-page-header name="Tag Explorer" icon="tags">
        <ol class="waltz-breadcrumbs">
            <li><a ui-sref="main">Home</a></li>
            <li>Tag Explorer</li>
        </ol>
    </waltz-page-header>

    <div class="row">
        <div class="col-md-8">
            <waltz-section name="{{ tagSet.tag }}"
                           small="( {{tagSet.refs.length }} )"
                           icon="tag"
                           ng-repeat="tagSet in ctrl.tagSets">
                <waltz-section-actions>
                    <button class="btn btn-default btn-xs"
                            ng-click="ctrl.removeTagSet(tagSet)">
                        Close
                    </button>
                </waltz-section-actions>
                <ul>
                    <li ng-repeat="refGroup in tagSet.refsByKind">
                        <h4 ng-bind="refGroup.key | toDisplayName:'entity'"></h4>
                        <ul>
                            <li ng-repeat="ref in refGroup.values">
                                <waltz-entity-link entity-ref="ref"></waltz-entity-link>
                            </li>
                        </ul>
                    </li>
                </ul>
            </waltz-section>
        </div>
        <div class="col-md-4">
            <waltz-section name="All Tags">
                <input class="form-control"
                       type="search"
                       placeholder="Search...."
                       ng-model="tagQuery">
                <br>
                <ul class="waltz-keyword-list">
                    <li ng-repeat="tag in ctrl.tags | filter:tagQuery"
                        ng-bind="tag"
                        class="clickable"
                        ng-click="ctrl.addTagSet(tag)">
                    </li>
                </ul>
            </waltz-section>

        </div>
    </div>




</div>
