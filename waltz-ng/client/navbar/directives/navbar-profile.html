<ul class="nav navbar-nav navbar-right waltz-navbar-profile"
    style="padding-right: 60px">

    <li class="dropdown" uib-dropdown>
        <a class="clickable"
           uib-dropdown-toggle>
            <span waltz-if-anonymous="true">
                <waltz-icon name="user"></waltz-icon>
                Anonymous
                <b class="caret"></b>
            </span>
            <span waltz-if-anonymous="false">
                <waltz-icon name="user"></waltz-icon>
                Profile
                <span class="badge wnp-badge"
                      ng-if="ctrl.notificationCountTotal > 0"
                      ng-bind="ctrl.notificationCountTotal">
                </span>
                <b class="caret"></b>
            </span>
        </a>
        <ul class="dropdown-menu no-overflow"
            uib-dropdown-menu
            style="width: 250px; margin-right:8px"
            role="menu">

            <li style="margin: 4px"
                class="no-overflow">
                <span waltz-if-anonymous="false">
                    <a ui-sref="main.profile.view ({userId: ctrl.user.userName})"
                       ng-bind="ctrl.user.userName"></a>
                </span>
                <span waltz-if-anonymous="true">Anonymous</span>
            </li>
            <li style="margin: 4px"
                ng-if="ctrl.allowDirectLogin"
                class="no-overflow">
                <span waltz-if-anonymous="true">
                    <a class="clickable"
                       ng-click="ctrl.login()">
                        <waltz-icon name="sign-in"></waltz-icon>
                        <span>Login</span>
                    </a>
                </span>
                <span waltz-if-anonymous="false">
                    <a class="clickable"
                       ng-click="ctrl.logout()">
                        <waltz-icon name="sign-out"></waltz-icon>
                        Logout
                    </a>
                </span>
            </li>

            <li style="margin: 4px"
                ui-sref-active="side-active"
                class="no-overflow">
                <span>
                    <a ui-sref="main.attestation.instance.user">
                        <waltz-icon class='text-muted small'
                                    fixed-width="true"
                                    name="check-square-o"></waltz-icon>
                        Attestations
                        <span class="badge wnp-badge"
                              ng-if="ctrl.notificationsCountsByKind['ATTESTATION'].count > 0"
                              ng-bind="ctrl.notificationsCountsByKind['ATTESTATION'].count">
                        </span>
                    </a>
                </span>
            </li>

            <li style="margin: 4px"
                ui-sref-active="side-active"
                class="no-overflow">
                <span waltz-has-role="APP_EDITOR">
                    <a ui-sref="main.app.registration">
                        <waltz-icon class='text-muted small'
                                    fixed-width="true"
                                    name="gift"></waltz-icon>
                        Register App
                    </a>
                </span>
            </li>
            <li style="margin: 4px"
                ui-sref-active="side-active"
                class="no-overflow">
                <span>
                    <a ui-sref="main.source-data-ratings">
                        <waltz-icon class='text-muted small'
                                    fixed-width="true"
                                    name="map-signs"></waltz-icon>
                        Source Data Ratings
                    </a>
                </span>
            </li>

            <li style="margin: 4px"
                ui-sref-active="side-active"
                class="no-overflow">
                <span>
                    <a ui-sref="main.survey.instance.user">
                        <waltz-icon class='text-muted small'
                                    fixed-width="true"
                                    name="wpforms"></waltz-icon>
                        Surveys
                        <span class="badge wnp-badge"
                              ng-if="ctrl.notificationsCountsByKind['SURVEY_INSTANCE'].count > 0"
                              ng-bind="ctrl.notificationsCountsByKind['SURVEY_INSTANCE'].count">
                        </span>
                    </a>
                </span>
            </li>

            <li style="margin: 4px"
                ui-sref-active="side-active"
                class="no-overflow">
                <span ng-show="ctrl.showSysAdminMenuItem">
                    <a ui-sref="main.system.list">
                        <waltz-icon class='text-muted small'
                                    fixed-width="true"
                                    name="wrench"></waltz-icon>
                        System Admin
                    </a>
                </span>
            </li>
        </ul>

        <script type="text/ng-template" id="navbar/modal-login.html">
            <div class="modal-header">
                <h3 class="modal-title">
                    Login to Waltz
                    <small ng-bind="logoOverlayText"></small>
                </h3>
            </div>

            <div class="modal-body">
                <form>
                    <label>Username</label>
                    <input class='form-control input-sm'
                           ng-model="username"
                           autofocus
                           placeholder="username">

                    <label>Password</label>
                    <input class='form-control input-sm'
                           type="password"
                           ng-model="password"
                           placeholder="password">
                </form>
            </div>

            <div class="modal-footer">
                <button class="btn btn-primary"
                        type="button"
                        ng-click="ok()">
                    OK
                </button>
                <button class="btn btn-warning"
                        type="button"
                        ng-click="cancel()">
                    Cancel
                </button>
            </div>
        </script>
    </li>

</ul>